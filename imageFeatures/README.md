# 收纳关卡特征提取工具

自动分析收纳关卡示意图，提取关键特征并保存到Excel表格，帮助分析哪些关卡设计更好。

## 功能特点

- 🎨 **颜色特征提取**: 平均RGB值、颜色分布、主色调、颜色丰富度
- 🖼️ **纹理特征提取**: 纹理均匀度、梯度强度
- 📐 **布局特征提取**: 中心/边缘亮度对比、对称性
- 🔢 **复杂度特征提取**: 信息熵、对比度、连通域数量、空白区域比例
- ✂️ **边缘特征提取**: 边缘像素比例、边缘密度
- 📊 **流量数据分析**: 支持关联流量数据，自动对比好/坏关卡的特征差异

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 1. 准备图片文件

将关卡示意图放在 `images` 目录下（或任意目录），支持格式：`.jpg`, `.jpeg`, `.png`, `.bmp`, `.gif`

### 2. 准备流量数据（可选）

创建一个CSV或Excel文件，包含关卡名称和流量好坏信息：

```csv
关卡名称,流量好坏
level_001,好
level_002,坏
level_003,好
```

### 3. 运行脚本

**基本用法**（只提取特征）：
```bash
python extract_level_features.py --image_dir images --output level_features.xlsx
```

**完整用法**（包含流量数据分析）：
```bash
python extract_level_features.py --image_dir images --traffic_file example_traffic_data.csv --output level_features.xlsx
```

### 4. 查看结果

脚本会生成Excel文件，包含所有提取的特征。如果提供了流量数据，还会在控制台显示：
- 流量统计信息
- 好关卡 vs 坏关卡的特征对比

## 提取的特征说明

### 基础信息
- 图片宽度、高度、宽高比、总像素数

### 颜色特征
- 平均R/G/B值：图像的整体色调
- R/G/B标准差：颜色分布的均匀程度
- 平均亮度、亮度标准差
- 唯一颜色数、颜色丰富度：颜色的多样性
- 主色调：图像的主要颜色

### 纹理特征
- 纹理均匀度：纹理的一致性
- 平均梯度强度、梯度标准差：纹理的复杂度

### 布局特征
- 中心/边缘区域平均亮度：布局的焦点
- 中心边缘亮度差：视觉层次
- 水平对称度：布局的对称性

### 复杂度特征
- 信息熵：图像的信息量/复杂度
- 对比度：明暗对比
- 连通域数量：物体数量
- 空白区域比例：留白程度

### 边缘特征
- 边缘像素比例、边缘密度：线条和边界的丰富程度

## 分析建议

1. **对比分析**: 使用流量数据对比好/坏关卡的特征差异
2. **特征筛选**: 在Excel中筛选和排序，找出关键特征
3. **可视化**: 可以将Excel数据导入其他工具进行可视化分析
4. **模式识别**: 观察好关卡是否有共同的特征模式

## 注意事项

- 确保图片文件名与流量数据中的关卡名称匹配（不含扩展名）
- 图片质量会影响特征提取的准确性
- 建议使用相同尺寸和格式的图片以获得更准确的对比
